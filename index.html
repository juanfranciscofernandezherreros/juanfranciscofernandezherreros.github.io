<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gu칤a Completa de Apache Kafka (Niveles B치sico a Avanzado)</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; margin: 20px; }
        h1, h2, h3 { color: #2c3e50; }
        table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
    </style>
</head>
<body>

    <header>
        <h1>Gu칤a Completa de Apache Kafka 游</h1>
        <p>An치lisis detallado de la infraestructura, flujo, procesamiento y optimizaci칩n de Kafka.</p>
        <p>Creado por Fernandez Herreros, Juan Francisco (External) | Lectura de 4 minutos</p>
    </header>

    <main>

        <section id="fundamentos">
            <h2>I. Fundamentos de Mensaje y Cl칰ster (Nivel B치sico)</h2>
            <p>Se centra en la unidad de datos y la infraestructura central de Kafka.</p>
            
            <article>
                <h3>A. Componentes del Cl칰ster</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Componente</th>
                            <th>Definici칩n</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Broker</td>
                            <td>El **servidor** que aloja y almacena mensajes Kafka. Se necesitan varios para la tolerancia a fallos.</td>
                        </tr>
                        <tr>
                            <td>Topic</td>
                            <td>El **almac칠n l칩gico** para los mensajes. Los productores escriben en 칠l y los consumidores leen de 칠l.</td>
                        </tr>
                        <tr>
                            <td>Partition</td>
                            <td>La **unidad f칤sica** dentro del Topic que permite la **escalabilidad** y el **paralelismo**. Cada partici칩n es un log de mensajes ordenado.</td>
                        </tr>
                        <tr>
                            <td>Offset</td>
                            <td>El **identificador secuencial 칰nico** para cada mensaje dentro de una Partition. Usado por los consumidores para rastrear su posici칩n de lectura.</td>
                        </tr>
                    </tbody>
                </table>
            </article>

            <article>
                <h3>B. Componentes del Flujo</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Componente</th>
                            <th>Definici칩n</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Producer</td>
                            <td>La aplicaci칩n que **env칤a** mensajes a un Topic.</td>
                        </tr>
                        <tr>
                            <td>Consumer</td>
                            <td>La aplicaci칩n que **lee** mensajes de una o m치s Partitions.</td>
                        </tr>
                    </tbody>
                </table>
            </article>
            
            <article>
                <h3>C. Componentes del Mensaje</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Componente</th>
                            <th>Definici칩n</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Value</td>
                            <td>El **dato real** transmitido (ej., un objeto JSON o Avro).</td>
                        </tr>
                        <tr>
                            <td>Key</td>
                            <td>Un campo usado para **garantizar la agrupaci칩n** y el orden de mensajes relacionados en la **misma Partition**.</td>
                        </tr>
                        <tr>
                            <td>Headers</td>
                            <td>**Metadatos** adjuntos al mensaje para seguimiento o enrutamiento.</td>
                        </tr>
                    </tbody>
                </table>
            </article>
        </section>
        
        <section id="estructura">
            <h2>II. Estructura, Compatibilidad y Acceso (Nivel Intermedio)</h2>
            <p>Se enfoca en asegurar la calidad de los datos y la flexibilidad en la integraci칩n.</p>
            
            <article>
                <h3>A. Estructura de Datos (Garant칤a de Calidad)</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Componente</th>
                            <th>Definici칩n</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Avro</td>
                            <td>Formato de serializaci칩n **basado en esquema**. Permite la evoluci칩n de datos compatible hacia adelante y hacia atr치s.</td>
                        </tr>
                        <tr>
                            <td>Schema Registry</td>
                            <td>Un **almac칠n centralizado** para todos los esquemas de datos. Vital para la compatibilidad entre Productores y Consumidores.</td>
                        </tr>
                    </tbody>
                </table>
            </article>
            
            <article>
                <h3>B. Integraci칩n y Acceso Flexible (APIs)</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Componente</th>
                            <th>Definici칩n</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Kafka REST Proxy</td>
                            <td>Una **pasarela HTTP** que permite a cualquier aplicaci칩n interactuar con el cl칰ster usando peticiones web est치ndar (en lugar de librer칤as nativas).</td>
                        </tr>
                        <tr>
                            <td>REST Data Flow</td>
                            <td>Interacci칩n: No-Producer $\rightarrow$ REST Proxy $\rightarrow$ Schema Registry $\rightarrow$ Kafka Cluster.</td>
                        </tr>
                    </tbody>
                </table>
            </article>
        </section>
        
        <section id="procesamiento">
            <h2>III. Procesamiento Continuo (Kafka Streams & ksqlDB)</h2>
            <p>Se enfoca en el procesamiento de datos en tiempo real y la gesti칩n de estado.</p>
            
            <article>
                <h3>A. Abstracciones de Datos (Kafka Streams API)</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Abstracci칩n</th>
                            <th>Representaci칩n</th>
                            <th>Naturaleza</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>KStream</td>
                            <td>Flujo de **Eventos** (ej., clics, transacciones).</td>
                            <td>Inmutable. Cada registro es un hecho que ha ocurrido.</td>
                        </tr>
                        <tr>
                            <td>KTable</td>
                            <td>**Tabla de Estado** (ej., stock actual, perfil de usuario).</td>
                            <td>Mutable. El 칰ltimo registro para una clave dada sobrescribe el anterior.</td>
                        </tr>
                    </tbody>
                </table>
            </article>

            <article>
                <h3>B. Motor de Procesamiento y Operaciones de Estado</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Componente</th>
                            <th>Definici칩n</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>ksqlDB</td>
                            <td>Una **base de datos de streaming** que ejecuta l칩gica de Kafka Streams usando comandos **SQL** continuos (CREATE STREAM..., CREATE TABLE...) sin c칩digo de programaci칩n.</td>
                        </tr>
                        <tr>
                            <td>Changelog Topic</td>
                            <td>Topic interno compactado que act칰a como el **respaldo durable** del estado local de una KTable. Usado para recuperaci칩n de fallos.</td>
                        </tr>
                        <tr>
                            <td>Repartitioning</td>
                            <td>Proceso interno de **"barajado"** que consume y produce datos a un Topic temporal para asegurar que la nueva **Key** est칠 correctamente alineada. Esencial antes de operaciones con estado (join, groupBy).</td>
                        </tr>
                    </tbody>
                </table>
            </article>
        </section>

        <section id="rendimiento">
            <h2>IV. Optimizaci칩n de Rendimiento (Nivel Avanzado)</h2>
            <p>An치lisis detallado de configuraciones para Alto Throughput y Procesamiento por Lotes.</p>
            
            <article>
                <h3>A. Optimizaci칩n del Producer (Escritura por Lotes)</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Propiedad</th>
                            <th>Prop칩sito</th>
                            <th>Efecto Principal</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>batch.size & linger.ms</td>
                            <td>**Batching**. Define el tama침o m치ximo (bytes) y tiempo de espera (ms) antes de enviar.</td>
                            <td>Reduce llamadas de red (mayor eficiencia, menor latencia).</td>
                        </tr>
                        <tr>
                            <td>delivery.timeout.ms</td>
                            <td>**Timeout Total de Entrega**. Tiempo total permitido para la entrega, incluyendo almacenamiento en b칰fer y reintentos.</td>
                            <td>Establece la vida 칰til m치xima de un mensaje en el productor.</td>
                        </tr>
                        <tr>
                            <td>max.block.ms</td>
                            <td>**Tiempo de Bloqueo**. Tiempo que el m칠todo send() se bloquear치 si los b칰feres est치n llenos.</td>
                            <td>Previene el bloqueo indefinido de la aplicaci칩n.</td>
                        </tr>
                    </tbody>
                </table>
            </article>

            <article>
                <h3>B. Optimizaci칩n del Consumer (Lectura por Lotes)</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Propiedad</th>
                            <th>Prop칩sito</th>
                            <th>Efecto Principal</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>listener.type: batch & max.poll.records</td>
                            <td>**Procesamiento por Lotes**. Configura la recepci칩n de un lote completo y su tama침o m치ximo.</td>
                            <td>Aumenta el **throughput** al procesar m치s mensajes a la vez.</td>
                        </tr>
                        <tr>
                            <td>fetch.min.bytes & fetch.max.wait.ms</td>
                            <td>**Eficiencia de Red**. Fuerza al Broker a esperar por un m칤nimo de bytes o un l칤mite de tiempo.</td>
                            <td>Reduce el **polling** ineficiente y garantiza lotes grandes.</td>
                        </tr>
                        <tr>
                            <td>max.poll.interval.ms</td>
                            <td>**Tolerancia de Procesamiento**. Tiempo m치ximo que el Consumer tiene para **procesar** el lote.</td>
                            <td>**Cr칤tico** para prevenir rebalances innecesarios.</td>
                        </tr>
                    </tbody>
                </table>
            </article>
        </section>

    </main>

    <footer>
        <p>Fin de la Gu칤a. Este contenido est치 dise침ado para la comprensi칩n de la arquitectura de Apache Kafka.</p>
    </footer>

</body>
</html>
